<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ - ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜ ê°€ì´ë“œ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Malgun Gothic', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #2c3e50;
        }
        .header h1 {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        .header .subtitle {
            color: #666;
            font-size: 1em;
        }
        .auth-section {
            max-width: 400px;
            margin: 100px auto;
            padding: 40px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .auth-section h2 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 600;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Malgun Gothic', 'Segoe UI', sans-serif;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #2c3e50;
        }
        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: #2c3e50;
            color: white;
            width: 100%;
        }
        .btn-primary:hover {
            background: #34495e;
        }
        .btn-success {
            background: #27ae60;
            color: white;
        }
        .btn-success:hover {
            background: #229954;
        }
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        .btn-warning:hover {
            background: #e67e22;
        }
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        .btn-danger:hover {
            background: #c0392b;
        }
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        .btn-secondary:hover {
            background: #7f8c8d;
        }
        .admin-content {
            display: none;
        }
        .admin-content.active {
            display: block;
        }
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .toolbar-left {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .toolbar-right {
            display: flex;
            gap: 10px;
        }
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .stat-box {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            text-align: center;
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }
        .category-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        .category-tab {
            padding: 10px 20px;
            background: white;
            border: 2px solid #2c3e50;
            color: #2c3e50;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 600;
        }
        .category-tab:hover, .category-tab.active {
            background: #2c3e50;
            color: white;
        }
        .solutions-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .solutions-table th {
            background: #2c3e50;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        .solutions-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        .solutions-table tr:hover {
            background: #f8f9fa;
        }
        .license-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }
        .license-permissive { background: #e8f5e9; color: #2e7d32; }
        .license-copyleft { background: #fff3e0; color: #e65100; }
        .license-proprietary { background: #fce4ec; color: #c2185b; }
        .action-buttons {
            display: flex;
            gap: 5px;
        }
        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            overflow-y: auto;
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            margin: 50px auto;
            max-width: 800px;
            width: 90%;
            border-radius: 15px;
            padding: 30px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        .modal-header h2 {
            color: #2c3e50;
        }
        .close-modal {
            font-size: 2em;
            cursor: pointer;
            color: #666;
            line-height: 1;
        }
        .close-modal:hover {
            color: #e74c3c;
        }
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .tags-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            min-height: 45px;
        }
        .tag-item {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: #e3f2fd;
            color: #1976d2;
            border-radius: 15px;
            font-size: 0.85em;
        }
        .tag-remove {
            cursor: pointer;
            font-weight: bold;
        }
        .tag-input {
            border: none;
            outline: none;
            flex: 1;
            min-width: 100px;
            padding: 5px;
        }
        .features-input-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .feature-item {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .feature-item input {
            flex: 1;
        }
        .feature-remove {
            padding: 8px 12px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .add-feature-btn {
            padding: 8px 15px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .alert-success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
        }
        .alert-error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            color: #721c24;
        }
        .alert-info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            color: #0c5460;
        }
        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        .logout-btn:hover {
            background: #c0392b;
        }
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            .toolbar {
                flex-direction: column;
                gap: 15px;
            }
            .toolbar-left, .toolbar-right {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- ë¡œê·¸ì¸ ì„¹ì…˜ -->
    <div class="auth-section" id="authSection">
        <h2>ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
        <div class="form-group">
            <label>ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" id="passwordInput" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <button class="btn btn-primary" onclick="login()">ë¡œê·¸ì¸</button>
        <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; font-size: 0.9em;">
            <strong>ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸:</strong> admin123<br>
            (ì‹¤ì œ ì‚¬ìš© ì‹œ ë³€ê²½í•˜ì„¸ìš”)
        </div>
    </div>

    <!-- ê´€ë¦¬ì ì½˜í…ì¸  -->
    <div class="container admin-content" id="adminContent">
        <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>

        <div class="header">
            <h1>âš™ï¸ ê´€ë¦¬ì í˜ì´ì§€</h1>
            <p class="subtitle">ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜ ë°ì´í„° ê´€ë¦¬</p>
        </div>

        <div class="stats-bar">
            <div class="stat-box">
                <div class="stat-number" id="totalSolutionsAdmin">0</div>
                <div class="stat-label">ì´ ì†”ë£¨ì…˜ ìˆ˜</div>
            </div>
            <div class="stat-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <div class="stat-number" id="totalCategoriesAdmin">0</div>
                <div class="stat-label">ì¹´í…Œê³ ë¦¬ ìˆ˜</div>
            </div>
            <div class="stat-box" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <div class="stat-number" id="lastModified">-</div>
                <div class="stat-label">ë§ˆì§€ë§‰ ìˆ˜ì •</div>
            </div>
        </div>

        <div class="toolbar">
            <div class="toolbar-left">
                <button class="btn btn-success" onclick="openAddModal()">â• ìƒˆ ì†”ë£¨ì…˜ ì¶”ê°€</button>
                <button class="btn btn-warning" onclick="openCategoryModal()">ğŸ“ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</button>
            </div>
            <div class="toolbar-right">
                <button class="btn btn-secondary" onclick="exportData()">ğŸ’¾ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
                <button class="btn btn-secondary" onclick="document.getElementById('importFile').click()">ğŸ“¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
                <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
                <button class="btn btn-primary" onclick="saveToMainPage()">ğŸš€ ë©”ì¸ í˜ì´ì§€ì— ì ìš©</button>
            </div>
        </div>

        <div id="alertContainer"></div>

        <div class="category-tabs" id="categoryTabs"></div>

        <div style="overflow-x: auto;">
            <table class="solutions-table" id="solutionsTable">
                <thead>
                    <tr>
                        <th>ì´ë¦„</th>
                        <th>ì œê³µì‚¬</th>
                        <th>ë¼ì´ì„ ìŠ¤</th>
                        <th>ì¹´í…Œê³ ë¦¬</th>
                        <th>íƒœê·¸</th>
                        <th style="width: 150px;">ì‘ì—…</th>
                    </tr>
                </thead>
                <tbody id="solutionsTableBody"></tbody>
            </table>
        </div>
    </div>

    <!-- ì†”ë£¨ì…˜ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div class="modal" id="solutionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">ìƒˆ ì†”ë£¨ì…˜ ì¶”ê°€</h2>
                <span class="close-modal" onclick="closeSolutionModal()">&times;</span>
            </div>
            <form id="solutionForm">
                <input type="hidden" id="editIndex">
                <input type="hidden id="editCategory">

                <div class="form-row">
                    <div class="form-group">
                        <label>ì†”ë£¨ì…˜ ì´ë¦„ *</label>
                        <input type="text" id="solutionName" required>
                    </div>
                    <div class="form-group">
                        <label>ì œê³µì‚¬ *</label>
                        <input type="text" id="solutionVendor" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ì¹´í…Œê³ ë¦¬ *</label>
                        <select id="solutionCategory" required></select>
                    </div>
                    <div class="form-group">
                        <label>ë¼ì´ì„ ìŠ¤ *</label>
                        <input type="text" id="solutionLicense" required placeholder="ì˜ˆ: Apache 2.0, MIT, GPL v3">
                    </div>
                </div>

                <div class="form-group">
                    <label>ë¼ì´ì„ ìŠ¤ ìœ í˜• *</label>
                    <select id="solutionLicenseType" required>
                        <option value="permissive">Permissive (í—ˆìš©ì )</option>
                        <option value="copyleft">Copyleft (ì¹´í”¼ë ˆí”„íŠ¸)</option>
                        <option value="proprietary">Proprietary (ë…ì )</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ì›¹ì‚¬ì´íŠ¸ URL *</label>
                    <input type="text" id="solutionUrl" required placeholder="ì˜ˆ: example.com (http:// ì œì™¸)">
                </div>

                <div class="form-group">
                    <label>íƒœê·¸ (Enterë¡œ ì¶”ê°€)</label>
                    <div class="tags-input-container" id="tagsContainer" onclick="focusTagInput()">
                        <input type="text" class="tag-input" id="tagInput" onkeydown="handleTagInput(event)">
                    </div>
                </div>

                <div class="form-group">
                    <label>ì£¼ìš” íŠ¹ì§• (3ê°œ)</label>
                    <div class="features-input-container" id="featuresContainer">
                        <div class="feature-item">
                            <input type="text" placeholder="íŠ¹ì§• 1" class="feature-input">
                        </div>
                        <div class="feature-item">
                            <input type="text" placeholder="íŠ¹ì§• 2" class="feature-input">
                        </div>
                        <div class="feature-item">
                            <input type="text" placeholder="íŠ¹ì§• 3" class="feature-input">
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 25px;">
                    <button type="submit" class="btn btn-success" style="flex: 1;">ğŸ’¾ ì €ì¥</button>
                    <button type="button" class="btn btn-secondary" onclick="closeSolutionModal()" style="flex: 1;">ì·¨ì†Œ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ ëª¨ë‹¬ -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</h2>
                <span class="close-modal" onclick="closeCategoryModal()">&times;</span>
            </div>
            <div class="form-group">
                <label>ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="newCategoryName" placeholder="ì¹´í…Œê³ ë¦¬ ì´ë¦„" style="flex: 1;">
                    <button class="btn btn-success" onclick="addCategory()">ì¶”ê°€</button>
                </div>
            </div>
            <div class="form-group">
                <label>ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ ëª©ë¡</label>
                <div id="categoryList" style="max-height: 300px; overflow-y: auto;"></div>
            </div>
            <button class="btn btn-secondary" onclick="closeCategoryModal()" style="width: 100%; margin-top: 20px;">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        const ADMIN_PASSWORD = 'admin123'; // ì‹¤ì œ ì‚¬ìš© ì‹œ ë³€ê²½í•˜ì„¸ìš”
        let solutions = {};
        let currentTags = [];
        let currentCategory = 'ì „ì²´';
        let editMode = false;

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤
        const STORAGE_KEY = 'opensource_solutions_data';
        const LAST_MODIFIED_KEY = 'opensource_last_modified';

        // ë¡œê·¸ì¸
        function login() {
            const password = document.getElementById('passwordInput').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('adminContent').classList.add('active');
                loadData();
            } else {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('authSection').style.display = 'block';
                document.getElementById('adminContent').classList.remove('active');
                document.getElementById('passwordInput').value = '';
            }
        }

        // ë°ì´í„° ë¡œë“œ
        function loadData() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                solutions = JSON.parse(saved);
            } else {
                // ê¸°ë³¸ ë°ì´í„° (ì´ˆê¸° ë°ì´í„°)
                solutions = getDefaultSolutions();
                saveData();
            }

            updateLastModified();
            renderAll();
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(solutions));
            localStorage.setItem(LAST_MODIFIED_KEY, new Date().toISOString());
            updateLastModified();
        }

        // ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateLastModified() {
            const lastMod = localStorage.getItem(LAST_MODIFIED_KEY);
            if (lastMod) {
                const date = new Date(lastMod);
                document.getElementById('lastModified').textContent =
                    `${date.getMonth()+1}/${date.getDate()}`;
            }
        }

        // ì „ì²´ ë Œë”ë§
        function renderAll() {
            updateStats();
            renderCategoryTabs();
            renderTable();
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            let totalSolutions = 0;
            Object.values(solutions).forEach(sols => totalSolutions += sols.length);

            document.getElementById('totalSolutionsAdmin').textContent = totalSolutions;
            document.getElementById('totalCategoriesAdmin').textContent = Object.keys(solutions).length;
        }

        // ì¹´í…Œê³ ë¦¬ íƒ­ ë Œë”ë§
        function renderCategoryTabs() {
            const container = document.getElementById('categoryTabs');
            const categories = ['ì „ì²´', ...Object.keys(solutions)];

            container.innerHTML = categories.map(cat =>
                `<div class="category-tab ${cat === currentCategory ? 'active' : ''}"
                      onclick="filterByCategory('${cat}')">${cat}</div>`
            ).join('');
        }

        // ì¹´í…Œê³ ë¦¬ í•„í„°
        function filterByCategory(category) {
            currentCategory = category;
            renderAll();
        }

        // í…Œì´ë¸” ë Œë”ë§
        function renderTable() {
            const tbody = document.getElementById('solutionsTableBody');
            let rows = [];

            if (currentCategory === 'ì „ì²´') {
                Object.entries(solutions).forEach(([cat, sols]) => {
                    sols.forEach((sol, idx) => {
                        rows.push(createTableRow(sol, cat, idx));
                    });
                });
            } else {
                const sols = solutions[currentCategory] || [];
                sols.forEach((sol, idx) => {
                    rows.push(createTableRow(sol, currentCategory, idx));
                });
            }

            tbody.innerHTML = rows.join('');
        }

        // í…Œì´ë¸” í–‰ ìƒì„±
        function createTableRow(sol, category, index) {
            return `
                <tr>
                    <td><strong>${sol.n}</strong></td>
                    <td>${sol.v}</td>
                    <td><span class="license-badge license-${sol.t}">${sol.l}</span></td>
                    <td>${category}</td>
                    <td>${sol.tags.slice(0, 2).join(', ')}${sol.tags.length > 2 ? '...' : ''}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn btn-warning" onclick="editSolution('${category}', ${index})">ìˆ˜ì •</button>
                            <button class="action-btn btn-danger" onclick="deleteSolution('${category}', ${index})">ì‚­ì œ</button>
                        </div>
                    </td>
                </tr>
            `;
        }

        // ì¶”ê°€ ëª¨ë‹¬ ì—´ê¸°
        function openAddModal() {
            editMode = false;
            document.getElementById('modalTitle').textContent = 'ìƒˆ ì†”ë£¨ì…˜ ì¶”ê°€';
            document.getElementById('solutionForm').reset();
            currentTags = [];
            renderTags();
            populateCategorySelect();
            document.getElementById('solutionModal').classList.add('active');
        }

        // ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸°
        function editSolution(category, index) {
            editMode = true;
            const sol = solutions[category][index];

            document.getElementById('modalTitle').textContent = 'ì†”ë£¨ì…˜ ìˆ˜ì •';
            document.getElementById('editCategory').value = category;
            document.getElementById('editIndex').value = index;
            document.getElementById('solutionName').value = sol.n;
            document.getElementById('solutionVendor').value = sol.v;
            document.getElementById('solutionLicense').value = sol.l;
            document.getElementById('solutionLicenseType').value = sol.t;
            document.getElementById('solutionUrl').value = sol.u;

            currentTags = [...sol.tags];
            renderTags();

            // íŠ¹ì§• ì±„ìš°ê¸°
            const featureInputs = document.querySelectorAll('.feature-input');
            sol.f.forEach((feature, idx) => {
                if (featureInputs[idx]) {
                    featureInputs[idx].value = feature;
                }
            });

            populateCategorySelect(category);
            document.getElementById('solutionModal').classList.add('active');
        }

        // ì†”ë£¨ì…˜ ì‚­ì œ
        function deleteSolution(category, index) {
            const sol = solutions[category][index];
            if (confirm(`"${sol.n}"ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                solutions[category].splice(index, 1);
                saveData();
                renderAll();
                showAlert('ì†”ë£¨ì…˜ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeSolutionModal() {
            document.getElementById('solutionModal').classList.remove('active');
        }

        // ì¹´í…Œê³ ë¦¬ ì„ íƒ ì±„ìš°ê¸°
        function populateCategorySelect(selected = null) {
            const select = document.getElementById('solutionCategory');
            select.innerHTML = Object.keys(solutions).map(cat =>
                `<option value="${cat}" ${cat === selected ? 'selected' : ''}>${cat}</option>`
            ).join('');
        }

        // íƒœê·¸ ì…ë ¥ ì²˜ë¦¬
        function handleTagInput(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                const input = event.target;
                const value = input.value.trim();
                if (value && !currentTags.includes(value)) {
                    currentTags.push(value);
                    renderTags();
                    input.value = '';
                }
            }
        }

        // íƒœê·¸ ë Œë”ë§
        function renderTags() {
            const container = document.getElementById('tagsContainer');
            const input = document.getElementById('tagInput');

            container.innerHTML = currentTags.map(tag =>
                `<span class="tag-item">
                    ${tag}
                    <span class="tag-remove" onclick="removeTag('${tag}')">Ã—</span>
                </span>`
            ).join('') + input.outerHTML;
        }

        // íƒœê·¸ ì œê±°
        function removeTag(tag) {
            currentTags = currentTags.filter(t => t !== tag);
            renderTags();
        }

        // íƒœê·¸ ì…ë ¥ í¬ì»¤ìŠ¤
        function focusTagInput() {
            document.getElementById('tagInput').focus();
        }

        // í¼ ì œì¶œ
        document.getElementById('solutionForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('solutionName').value.trim();
            const vendor = document.getElementById('solutionVendor').value.trim();
            const category = document.getElementById('solutionCategory').value;
            const license = document.getElementById('solutionLicense').value.trim();
            const licenseType = document.getElementById('solutionLicenseType').value;
            const url = document.getElementById('solutionUrl').value.trim();

            const features = Array.from(document.querySelectorAll('.feature-input'))
                .map(input => input.value.trim())
                .filter(f => f !== '');

            if (features.length !== 3) {
                alert('ì£¼ìš” íŠ¹ì§• 3ê°œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const solution = {
                n: name,
                v: vendor,
                l: license,
                t: licenseType,
                u: url,
                tags: currentTags,
                f: features
            };

            if (editMode) {
                const oldCategory = document.getElementById('editCategory').value;
                const index = parseInt(document.getElementById('editIndex').value);

                if (oldCategory === category) {
                    solutions[category][index] = solution;
                } else {
                    solutions[oldCategory].splice(index, 1);
                    if (!solutions[category]) {
                        solutions[category] = [];
                    }
                    solutions[category].push(solution);
                }
                showAlert('ì†”ë£¨ì…˜ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else {
                if (!solutions[category]) {
                    solutions[category] = [];
                }
                solutions[category].push(solution);
                showAlert('ìƒˆ ì†”ë£¨ì…˜ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }

            saveData();
            closeSolutionModal();
            renderAll();
        });

        // ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ ëª¨ë‹¬
        function openCategoryModal() {
            renderCategoryList();
            document.getElementById('categoryModal').classList.add('active');
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.remove('active');
        }

        function renderCategoryList() {
            const container = document.getElementById('categoryList');
            container.innerHTML = Object.keys(solutions).map(cat => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #e0e0e0;">
                    <span><strong>${cat}</strong> (${solutions[cat].length}ê°œ ì†”ë£¨ì…˜)</span>
                    <button class="action-btn btn-danger" onclick="deleteCategory('${cat}')"
                            ${solutions[cat].length > 0 ? 'disabled title="ì†”ë£¨ì…˜ì´ ìˆëŠ” ì¹´í…Œê³ ë¦¬ëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"' : ''}>
                        ì‚­ì œ
                    </button>
                </div>
            `).join('');
        }

        function addCategory() {
            const name = document.getElementById('newCategoryName').value.trim();
            if (!name) {
                alert('ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            if (solutions[name]) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤.');
                return;
            }
            solutions[name] = [];
            saveData();
            renderCategoryList();
            renderAll();
            document.getElementById('newCategoryName').value = '';
            showAlert(`"${name}" ì¹´í…Œê³ ë¦¬ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
        }

        function deleteCategory(category) {
            if (solutions[category].length > 0) {
                alert('ì†”ë£¨ì…˜ì´ ìˆëŠ” ì¹´í…Œê³ ë¦¬ëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            if (confirm(`"${category}" ì¹´í…Œê³ ë¦¬ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                delete solutions[category];
                saveData();
                renderCategoryList();
                renderAll();
                showAlert('ì¹´í…Œê³ ë¦¬ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showAlert(message, type = 'info') {
            const container = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            container.appendChild(alert);

            setTimeout(() => {
                alert.remove();
            }, 3000);
        }

        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportData() {
            const dataStr = JSON.stringify(solutions, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `opensource-solutions-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showAlert('ë°ì´í„°ê°€ ë‚´ë³´ë‚´ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (confirm('ê¸°ì¡´ ë°ì´í„°ë¥¼ ë®ì–´ì“°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        solutions = imported;
                        saveData();
                        renderAll();
                        showAlert('ë°ì´í„°ê°€ ê°€ì ¸ì˜¤ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                    }
                } catch (error) {
                    alert('ì˜ëª»ëœ JSON íŒŒì¼ì…ë‹ˆë‹¤.');
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }

        // ë©”ì¸ í˜ì´ì§€ì— ì ìš©
        function saveToMainPage() {
            if (confirm('í˜„ì¬ ë°ì´í„°ë¥¼ ë©”ì¸ í˜ì´ì§€ì— ì ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ë©”ì¸ í˜ì´ì§€ íŒŒì¼ ìƒì„±
                generateMainPage();
                showAlert('ë©”ì¸ í˜ì´ì§€ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤! íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš”.', 'success');
            }
        }

        // ë©”ì¸ í˜ì´ì§€ ìƒì„± (ê¸°ì¡´ íŒŒì¼ ì—…ë°ì´íŠ¸)
        function generateMainPage() {
            const dataStr = JSON.stringify(solutions, null, 2);
            showAlert('localStorageì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”.', 'info');
        }

        // ê¸°ë³¸ ì†”ë£¨ì…˜ ë°ì´í„°
        function getDefaultSolutions() {
            return {
                "ìš´ì˜ì²´ì œ": [
                    {n:"Ubuntu",v:"Canonical",l:"GPL",t:"copyleft",u:"ubuntu.com",tags:["Linux","Desktop","Server"],f:["ì‚¬ìš©ì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤","5ë…„ LTS ì§€ì›","ëŒ€ê·œëª¨ ì»¤ë®¤ë‹ˆí‹°"]},
                    {n:"Debian",v:"Debian Project",l:"DFSG",t:"permissive",u:"debian.org",tags:["Linux","Server","Stable"],f:["ë†’ì€ ì•ˆì •ì„±","ë°©ëŒ€í•œ íŒ¨í‚¤ì§€","ì—„ê²©í•œ í’ˆì§ˆ ê´€ë¦¬"]}
                ],
                "ë°ì´í„°ë² ì´ìŠ¤": [
                    {n:"PostgreSQL",v:"PostgreSQL Global",l:"PostgreSQL",t:"permissive",u:"postgresql.org",tags:["RDBMS","SQL","ACID"],f:["ACID ì™„ë²½ ì§€ì›","ë³µì¡í•œ ì¿¼ë¦¬ ìµœì í™”","JSON/XML ì§€ì›"]},
                    {n:"MySQL",v:"Oracle",l:"GPL v2",t:"copyleft",u:"mysql.com",tags:["RDBMS","SQL","Web"],f:["ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í‘œì¤€","InnoDB ìŠ¤í† ë¦¬ì§€ ì—”ì§„","ë³µì œ ë° í´ëŸ¬ìŠ¤í„°ë§"]}
                ]
            };
        }

        // ì´ˆê¸°í™”
        if (document.getElementById('adminContent').classList.contains('active')) {
            loadData();
        }
    </script>
</body>
</html>
